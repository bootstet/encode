(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{575:function(t,e,a){"use strict";a.r(e);var i=a(25),v=Object(i.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"从输入-url-到页面加载-系统复习笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从输入-url-到页面加载-系统复习笔记"}},[t._v("#")]),t._v(" 从输入 URL 到页面加载：系统复习笔记")]),t._v(" "),e("blockquote",[e("p",[t._v("一页纸（30 秒）")])]),t._v(" "),e("ul",[e("li",[t._v("浏览器多进程，渲染进程多线程（GUI、JS、网络、定时器、事件）。输入 URL → 解析协议与地址 → 启动网络线程。")]),t._v(" "),e("li",[t._v("DNS 解析（缓存 → 递归/迭代，可能经 CDN 调度）。TCP 三次握手（HTTP/1.x）；TLS 握手（HTTPS）。")]),t._v(" "),e("li",[t._v("发送 HTTP 请求（方法/URL/Headers/Body）→ 服务端（负载均衡/网关/应用）处理 → 返回响应（状态码/Headers/Body）。")]),t._v(" "),e("li",[t._v("缓存判定：强缓存（Cache-Control/Expires）优先；否则协商缓存（ETag/If-None-Match 或 Last-Modified/If-Modified-Since）。")]),t._v(" "),e("li",[t._v("解析与渲染：HTML→DOM，CSS→CSSOM，合并为 Render Tree → Layout（回流）→ Paint（重绘）→ Composite（合成，GPU 参与）。")]),t._v(" "),e("li",[t._v("资源加载：CSS 异步加载但会阻塞首次渲染；JS 默认阻塞解析（async/await、defer 区别）；图片异步不阻塞解析。")]),t._v(" "),e("li",[t._v("关键事件：DOMContentLoaded（DOM 构建完成，不含样式/图片）与 load（所有资源加载完成）。")]),t._v(" "),e("li",[t._v("JS 引擎：解析（词法/语法→AST→字节码/机器码）、预处理（变量/函数提升；ASI 分号补全）、执行（执行上下文/作用域链/this/GC）。")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"主干流程-骨架"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主干流程-骨架"}},[t._v("#")]),t._v(" 主干流程（骨架）")]),t._v(" "),e("div",{staticClass:"language-text path=null start=null extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("URL → 解析协议/主机/端口/路径/查询/Fragment\n  → 启动网络线程\n  → DNS 解析（多级缓存 → 递归/迭代，可能 CDN 调度）\n  → TCP 三次握手（HTTP/1.x），或 QUIC/TCP 复用（HTTP/3/2）\n  → （HTTPS）TLS 握手（证书校验、对称密钥协商）\n  → 发送 HTTP 请求 → 网关/负载（Nginx）→ 应用 → 数据/缓存\n  → 返回响应（状态码/头/体）\n  → 缓存规则判定（强缓存→命中即用；否则发起协商缓存）\n  → 解析与渲染：HTML→DOM，CSS→CSSOM，合并 Render Tree\n  → Layout（回流）→ Paint（重绘）→ Composite（合成）→ 显示\n  → 事件：DOMContentLoaded / load\n")])])]),e("h2",{attrs:{id:"网络与协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#网络与协议"}},[t._v("#")]),t._v(" 网络与协议")]),t._v(" "),e("ul",[e("li",[t._v("DNS：多级缓存（浏览器/系统/Host/ISP 递归）；耗时可用 dns-prefetch 预解析（谨慎使用）。")]),t._v(" "),e("li",[t._v("TCP：三次握手/四次挥手；同域并发连接数受限（2–10+）。HTTP/2 多路复用同一 TCP，HTTP/3 使用 QUIC（基于 UDP）。")]),t._v(" "),e("li",[t._v("GET vs POST（规范层）：GET 通常一个包（头+体合并）；POST 常为两个阶段（Expect: 100-continue）。")]),t._v(" "),e("li",[t._v("HTTPS（TLS）：证书校验（CA→链），ClientRandom/ServerRandom/Premaster 协商对称密钥，后续对称加密传输。")])]),t._v(" "),e("h2",{attrs:{id:"http-交互与常用头"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-交互与常用头"}},[t._v("#")]),t._v(" HTTP 交互与常用头")]),t._v(" "),e("ul",[e("li",[t._v("通用：Method、URL、Status、Content-Type、Content-Encoding（gzip/br）、Connection、Keep-Alive。")]),t._v(" "),e("li",[t._v("CORS：Origin ↔ Access-Control-Allow-Origin/Methods/Headers，预检 OPTIONS。")]),t._v(" "),e("li",[t._v("Cookie/Set-Cookie：作用域/过期/SameSite/HttpOnly/Secure；静态资源建议使用无 Cookie 域名以减负。")])]),t._v(" "),e("h2",{attrs:{id:"缓存-强-协商"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存-强-协商"}},[t._v("#")]),t._v(" 缓存（强/协商）")]),t._v(" "),e("ul",[e("li",[t._v("强缓存：Cache-Control: max-age / immutable / s-maxage；（HTTP/1.0）Expires。")]),t._v(" "),e("li",[t._v("协商缓存：ETag ↔ If-None-Match（更精确）；Last-Modified ↔ If-Modified-Since（秒级）。")]),t._v(" "),e("li",[t._v("规则：强缓存命中直接 200(from cache)；否则发起请求，协商命中 304。")]),t._v(" "),e("li",[t._v("生产建议：优先 Cache-Control + ETag；存在同时配置时 Cache-Control 优先于 Expires。")])]),t._v(" "),e("h2",{attrs:{id:"资源加载与阻塞"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源加载与阻塞"}},[t._v("#")]),t._v(" 资源加载与阻塞")]),t._v(" "),e("ul",[e("li",[t._v("CSS：异步下载；首次渲染前阻塞（避免闪烁/错样）。media 属性不阻塞。")]),t._v(" "),e("li",[t._v("JS：默认阻塞解析；async（下载并行，下载完即执行，顺序不保证）、defer（解析后、DOMContentLoaded 前后执行，按顺序）。")]),t._v(" "),e("li",[t._v("IMG：异步下载，不阻塞解析，完成后替换占位。")]),t._v(" "),e("li",[t._v("事件：DOMContentLoaded（仅 DOM 就绪）；load（所有资源就绪）。")])]),t._v(" "),e("h2",{attrs:{id:"渲染流水线"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#渲染流水线"}},[t._v("#")]),t._v(" 渲染流水线")]),t._v(" "),e("ul",[e("li",[t._v("DOM 构建（字节→字符→token→节点→树），CSSOM 构建（同理）。")]),t._v(" "),e("li",[t._v("Render Tree = DOM（可见节点） + CSSOM（计算样式）。")]),t._v(" "),e("li",[t._v("Layout（回流）：计算几何信息；Paint（重绘）：绘制像素；Composite：合成图层（GPU）。")]),t._v(" "),e("li",[t._v("触发回流的常见操作：更改几何（width/height/padding/margin/position）、读取布局信息（offset*/client*/scroll*、getComputedStyle）。")]),t._v(" "),e("li",[t._v("优化要点：\n"),e("ul",[e("li",[t._v("合批 DOM 读写（如使用请求帧/微任务队列、FastDom），避免读写交错。")]),t._v(" "),e("li",[t._v("使用 class 切换代替逐条 style 写入；脱离文档流/开启合成层（will-change/transform）优化动画。")]),t._v(" "),e("li",[t._v("长列表虚拟化、图片/字体策略（WebP/AVIF、子集化、preload/prefetch）。")])])])]),t._v(" "),e("h2",{attrs:{id:"css-可视化格式模型-速览"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#css-可视化格式模型-速览"}},[t._v("#")]),t._v(" CSS 可视化格式模型（速览）")]),t._v(" "),e("ul",[e("li",[t._v("盒模型：content/padding/border/margin。")]),t._v(" "),e("li",[t._v("包含块 Containing Block：定位/尺寸的参照系。")]),t._v(" "),e("li",[t._v("BFC：块格式化上下文（float 不重叠、margin 折叠规则、内部自洽；触发：float≠none、position:absolute/fixed、display:inline-block/table-cell 等、overflow≠visible）。")]),t._v(" "),e("li",[t._v("IFC：行内格式化上下文（行框、基线、对齐规则）。")])]),t._v(" "),e("h2",{attrs:{id:"js-引擎与运行机制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#js-引擎与运行机制"}},[t._v("#")]),t._v(" JS 引擎与运行机制")]),t._v(" "),e("ul",[e("li",[t._v("解析：词法/语法→AST→（字节码）→JIT 机器码。")]),t._v(" "),e("li",[t._v("预处理：声明提升（var/函数）、ASI 分号插入（return 换行陷阱）。")]),t._v(" "),e("li",[t._v("执行：执行上下文（全局/函数）、执行栈、VO/AO、作用域链、this 绑定（调用位置决定），事件循环（宏/微任务）。")]),t._v(" "),e("li",[t._v("GC：标记清除为主，分代回收（new space/old space）。避免无意闭包/全局引用导致泄漏。")])]),t._v(" "),e("h2",{attrs:{id:"安全与跨域-要点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安全与跨域-要点"}},[t._v("#")]),t._v(" 安全与跨域（要点）")]),t._v(" "),e("ul",[e("li",[t._v("XSS（反射/存储/DOM）：转义、CSP、HttpOnly、模板安全。")]),t._v(" "),e("li",[t._v("CSRF：SameSite Cookie、双重 Cookie + Token、Referer/Origin 校验。")]),t._v(" "),e("li",[t._v("CORS：服务端显式允许；预检缓存；凭证传递。")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"实战-checklist"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实战-checklist"}},[t._v("#")]),t._v(" 实战 Checklist")]),t._v(" "),e("ul",[e("li",[t._v("DNS：关键域名预解析（dns-prefetch / preconnect）。")]),t._v(" "),e("li",[t._v("协议：全站 HTTPS；优先 HTTP/2/3；开启 gzip/br 压缩。")]),t._v(" "),e("li",[t._v("缓存：静态资源强缓存 + 内容哈希；ETag/Last-Modified 兜底；HTML 设短缓存或 no-store。")]),t._v(" "),e("li",[t._v("资源：关键 CSS 内联；JS 合理 async/defer；图片自适应与懒加载；字体子集与 font-display。")]),t._v(" "),e("li",[t._v("渲染：动画用 transform/opacity；合批 DOM 变更；虚拟列表；避免同步布局抖动。")]),t._v(" "),e("li",[t._v("监控：采集 LCP/CLS/INP/TTI；错误上报（Sentry）+ SourceMap；关键链路埋点。")])]),t._v(" "),e("h2",{attrs:{id:"高频问法-30-秒口径"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#高频问法-30-秒口径"}},[t._v("#")]),t._v(" 高频问法（30 秒口径）")]),t._v(" "),e("ul",[e("li",[t._v("输入 URL 发生了什么？按“网络 → 缓存 → 解析/渲染 → JS 运行”的顺序回答，并在每步点名关键点（DNS/TLS/缓存头/阻塞点/事件/回流重绘/async vs defer）。")]),t._v(" "),e("li",[t._v("强缓存 vs 协商缓存？命中条件与头部对；改动路径/版本哈希刷新强缓存；304 的生效条件。")]),t._v(" "),e("li",[t._v("CSS/JS 对首屏的影响？CSS 阻塞首次渲染、JS 阻塞解析；async/defer 区别与使用场景。")]),t._v(" "),e("li",[t._v("回流与重绘？触发操作、如何合批读写、动画优化手段。")]),t._v(" "),e("li",[t._v("TLS 如何握手？证书校验与对称密钥协商的核心步骤与开销点。")])]),t._v(" "),e("h2",{attrs:{id:"速记卡片-anki-导入示例-tsv"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#速记卡片-anki-导入示例-tsv"}},[t._v("#")]),t._v(" 速记卡片（Anki 导入示例 TSV）")]),t._v(" "),e("div",{staticClass:"language-text path=null start=null extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("输入 URL 的完整链路？\tDNS→TCP/TLS→HTTP 请求/响应→缓存判定→HTML/CSS 解析→Render Tree→Layout/Paint/Composite→DOMContentLoaded/load\n强缓存与协商缓存如何区分？\t强缓存：Cache-Control/Expires 命中直接用；协商缓存：ETag/Last-Modified 对比命中返回 304\nasync 与 defer 区别？\tasync 下载后立即执行，顺序不保证；defer 按顺序、文档解析完成后执行（一般在 DOMContentLoaded 前后）\n回流与重绘的触发？\t回流：几何变更/读取布局属性；重绘：颜色/阴影等外观变化；回流必然重绘\nHTTPS 核心价值与代价？\t提供机密性/完整性/身份认证；握手开销、证书管理；配合 HTTP/2/3 可抵消延迟\n")])])]),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[t._v("How browsers work（HTML5Rocks）")]),t._v(" "),e("li",[t._v("FEX: What happen when you…")]),t._v(" "),e("li",[t._v("文章原文：从输入 URL 到页面加载的过程（戴力春）")])])])}),[],!1,null,null,null);e.default=v.exports}}]);